<% provide(:title, "Update my profile") %>
<div class="container">
	<h1>Update my profile</h1>

	<div class="row">
	  <div class="col-md-6 col-md-offset-3">
	    <%= render 'shared/error_messages' %>

	    <div>
		  <b>Name</b>
		  <%= simple_form_for(@user) do |f| %>

		    <%= f.text_field :first_name, placeholder: "First name" %>
		    <%= f.text_field :last_name, placeholder: "Last name" %>

		    <%= f.submit "Save name", class: "btn btn-primary profile-update" %>
		  <% end %>
		</div>
		<br />
		<div>
		  <b>Birthdate</b>
		  <%= form_for(@user) do |f| %>

		    <%= f.date_select :date_of_birth, :start_year => Date.today.year - 120, :end_year => Date.today.year %>

		    <%= f.submit "Save birthdate", class: "btn btn-primary profile-update" %>
		  <% end %>
		</div>

		<br />

		<div>
		  <b>Gender</b>
		  <%= form_for(@user) do |f| %>
			<div>
			  <label class="radio-inline">
			    <%= f.radio_button :gender, 'female' %> Female
			  </label>
			  <label class="radio-inline">
			    <%= f.radio_button :gender, 'male' %> Male 
			  </label>
			</div>

			<%= f.submit "Save gender", class: "btn btn-primary profile-update" %>
		  <% end %>
		</div>

		<br />

		<div>
		  <b>About me</b>
		  <%= form_for(@user) do |f| %>

		    <%= f.text_area :about_me %>

		    <%= f.submit "Save my description", class: "btn btn-primary profile-update" %>
		  <% end %>
		</div>

		<br />

		<div>
		  <b>Country of residence</b>
		  <%= form_for(@user) do |f| %>
		    <%= f.country_select :country_of_residence_code, selected: "#{@user.lives_in.code}" %>
		    <%= f.submit "Save country of residence", class: "btn btn-primary profile-update" %>
		  <% end %>
		</div>

		<br />

		<div>
		  <b>Countries I Have Visited</b>
			<div class="traveled_to_wrap">
				<%= form_for(@user) do |f| %>
					<% if @user_traveled_list.length > 0 %>
						<% @user_traveled_list.each do |country| %>
							<div class="country_select">
								<%= f.country_select :country_visited, selected: "#{country.code}" %>
								<a href="#" class="remove_field">Remove</a>
							</div>
						<% end %>
					<% else %>
						<div class="country_select">
							<%= f.country_select :country_visited, selected: "US" %>
							<a href="#" class="remove_field">Remove</a>
						</div>
					<% end %>
				<% end %>
	    		<!--<div><input type="text" traveledTo="[]"></div>-->
			</div>
			<button class="add_visited_button">Add More Countries I've Traveled to</button>

			<input type="submit" name="commit" value="Save country I've Traveled to" class="btn btn-primary save-traveled-to">
		</div>

		<br />

		<div>
		  <b>Countries I Want to Visit </b>
			<div class="to_visit_wrap">
				<%= form_for(@user) do |f| %>
					<% if @user_to_travel_to.length > 0 %>
						<% @user_to_travel_to.each do |country| %>
							<div class="country_select">
								<%= f.country_select :country_to_visit, selected: "#{country.code}" %>
								<a href="#" class="remove_field">Remove</a>
							</div>
						<% end %>
					<% else %>
						<div class="country_select">
							<%= f.country_select :country_to_visit, selected: "US" %>
							<a href="#" class="remove_field">Remove</a>
						</div>
					<% end %>
				<% end %>
	    		<!--<div><input type="text" traveledTo="[]"></div>-->
			</div>
			<button class="add_to_visit_button">Add More Countries I Want to Travel to</button>
			<input type="submit" name="commit" value="Save country I Want to Visit" class="btn btn-primary save-to-visit">
		</div>

		<br />

		<div>
		  <b>Password</b>
		  <%= form_for(@user) do |f| %>
		    <%= f.password_field :password, placeholder: "New password" %>
		    <%= f.password_field :password_confirmation, placeholder: "Re-enter new password" %>
		    <%= f.submit "Save password", class: "btn btn-primary profile-update" %>
		  <% end %>
		</div>

		<br />

		<div>
			<b>Profile picture</b>
			<%= form_for(@user) do |f| %>		
				<%= f.file_field :avatar, as: :file %>
				<% if f.object.avatar? %>
					<a class="pull-right"><img title="profile image" class="img-circle img-responsive"<%= image_tag f.object.avatar.thumb.url %></a> 
				<% else %>
					<div class="gravatar_edit">
						<a class="pull-right"><img title="profile image" class="img-circle img-responsive" <%= gravatar_for @user %> </a>
						<a href="http://gravatar.com/emails" target="_blank">Change my gravatar picture </a>
					</div>
				<% end %>
				<br>
				<br>
				<br>
				<br>
				<br>
				<br>
				<br>
				<br>
				<%= f.submit "Update profile picture", class: "btn btn-primary" %>
			<% end %>
		</div>
	  </div>
	</div>
</div>